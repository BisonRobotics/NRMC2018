<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="robot">

    <!-- Define materials -->
    <material name="brown">
        <color rgba="0.45 0.45 0.28 1"/>
    </material>

    <material name="red">
        <color rgba="0.5 0.24 0.00 1"/>
    </material>

    <material name="green">
        <color rgba="0.24 0.34 0.00 1"/>
    </material>

    <material name="black">
        <color rgba="0.10 0.10 0.10 1"/>
    </material>

    <material name="grey">
        <color rgba="0.80 0.80 0.80 1"/>
    </material>

    <!-- Define linkages and joints -->
    <link name="base_link" />
        <!--<visual>
            <geometry>
                <box size="0.001 0.001 0.001" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="orange" />
        </visual>
        <collision>
            <geometry>
                <box size="0.001 0.001 0.001" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
    </link>-->

    <xacro:macro name="frame">
        <link name="frame">
            <visual>
                <geometry>
                    <mesh filename="package://description/meshes/frame.stl" />
                </geometry>
                <origin xyz="0 0 0" rpy="${pi/2} 0 0" />
                <material name="brown" />
            </visual>
        </link>
    </xacro:macro>
    <xacro:frame/>

    <joint name="base_link_to_frame" type="fixed">
        <parent link="base_link"/>
        <child link="frame"/>
        <origin xyz="0 0 2.0796e-01" rpy="0 0 0" />
    </joint>

    <xacro:macro name="wheel" params="x_name y_name rot y_dir xdist color">
        <link name="${x_name}_${y_name}_wheel">
            <visual>
                <geometry>
                    <mesh filename="package://description/meshes/wheel.stl" />
                </geometry>
                <origin xyz="0 0 0" rpy="${rot} 0 0"/>
                <material name="${color}"/>
            </visual>
        </link>

        <joint name="frame_to_${x_name}_${y_name}_wheel" type="fixed">
            <parent link="frame"/>
            <child link="${x_name}_${y_name}_wheel"/>
            <origin xyz="${xdist} ${y_dir*0.3109468} -0.0555752" />
        </joint>
    </xacro:macro>
    <xacro:wheel x_name="front" y_name="left"  rot="${-pi/2}" y_dir="1"  xdist="0.73025" color="red"   />
    <xacro:wheel x_name="front" y_name="right" rot="${pi/2}"  y_dir="-1" xdist="0.73025" color="green" />
    <xacro:wheel x_name="back"  y_name="left"  rot="${-pi/2}" y_dir="1"  xdist="0.0455676" color="red"   />
    <xacro:wheel x_name="back"  y_name="right" rot="${pi/2}"  y_dir="-1" xdist="0.0455676" color="green" />

    <link name="central_drive">
        <visual>
            <geometry>
                <mesh filename="package://description/meshes/central_drive.stl" />
            </geometry>
            <origin xyz="0.1121664 -0.098425 -0.05715" rpy="0 ${pi/2} ${pi}" />
            <material name="grey" />
        </visual>
    </link>

    <joint name="frame_to_central_drive" type="fixed">
        <parent link="frame"/>
        <child link="central_drive"/>
        <origin xyz="0.5291836 0.0 0.079375" rpy="0 0 0" />
    </joint>

    <link name="bucket">
        <visual>
            <geometry>
                <mesh filename="package://description/meshes/bucket.stl" />
            </geometry>
            <origin xyz="0.0025146 0 -0.5473446" rpy="${pi/2} 0 0" />
            <material name="grey" />
        </visual>
    </link>

    <joint name="frame_to_bucket" type="revolute">
        <parent link="frame"/>
        <child link="bucket"/>
        <origin xyz="-0.2286 0.0 0.4318" rpy="0 0 0" />
        <axis xyz="0 1 0"/>
        <limit effort="1000.0" lower="-3.14" upper="3.14" velocity="1000.0"/>
    </joint>

    <!--
    <link name="sensor">
        <visual>
            <geometry>
                <cylinder length="7.0003e-02" radius="2.5e-02" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="black" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="7.0003e-02" radius="2.5e-02" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
    </link>

    <joint name="frame_to_sensor" type="fixed">
        <parent link="frame"/>
        <child link="sensor"/>
        <origin xyz="5.0000e-01 0 -1.5796e-01" rpy="0 0 0" />
    </joint>-->

</robot>


